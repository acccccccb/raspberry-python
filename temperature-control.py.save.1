import os
import RPi.GPIO as GPIO
import time

fs = 14
redLed = 26
blueLed = 4
count = 0

GPIO.setmode(GPIO.BCM)
GPIO.output(fs,GPIO.OUT)
GPIO.output(redLed,GPIO.OUT)
GPIO.output(blueLed,GPIO.OUT)

def getCPUtemperature():
	res = os.popen('vcgencmd measure_temp').readline()
	return(res.replace("temp=","").replace("'C\n",""))

def pilotLamp(led,action):
	if action == 'on':
		GPIO.output(led,GPIO.HIGH)

pilotLamp(redLed,'on')
try:
	while ( count == 0 ) :
		# Return CPU temperature as a character string                                     
		if float(CPU_temp) >= 55 :
		
			print(getCPUtemperature())
			print("Fan power on")
			GPIO.output(fs,GPIO.HIGH)
			
	
		elif float(CPU_temp) <= 45 :
			GPIO.output(fs,GPIO.LOW)
			#GPIO.output(blueLed,GPIO.HIGH)
			print("Fan power off")
			GPIO.cleanup()
	
		else :
			print("CPU Temperature:" + CPU_temp)
			GPIO.output(blueLed,GPIO.LOW)
			
		time.sleep(10)

except KeyboardInterrupt:
	GPIO.output(redLed,GPIO.HIGH)
	GPIO.output(blueLed,GPIO.HIGH)
	GPIO.output(fs,GPIO.HIGH)
	GPIO.cleanup()
